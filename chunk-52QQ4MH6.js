import{a as G}from"./chunk-JIH7QPGJ.js";import{d as B,e as N,f as $,g as q}from"./chunk-GUQKOEOD.js";import{k as A,l as L}from"./chunk-54OSNODU.js";import{$ as T,F as c,G as w,Ga as P,Ja as V,K as h,Ka as F,M as g,N as t,O as i,P as d,T as k,U as p,V as u,ab as I,ba as o,ca as S,da as D,ha as M,ia as v,jb as O,k as E,mb as z,ob as R,p as x,r as _,ra as y,s as f,sa as C,wb as j}from"./chunk-2TYDJMCA.js";import"./chunk-2XJVAMHT.js";function Y(r,s){r&1&&(t(0,"tr",12)(1,"th",13),o(2,"Titulo"),i(),t(3,"th",13),o(4,"Fecha creaci\xF3n"),i(),t(5,"th",13),o(6,"fecha limite"),i(),t(7,"th",13),o(8,"Acciones"),i()())}function H(r,s){if(r&1){let l=k();t(0,"tr")(1,"td",14),o(2),i(),t(3,"td",14),o(4),y(5,"date"),i(),t(6,"td",14),o(7),y(8,"date"),i(),t(9,"td",15)(10,"button",16),p("click",function(){let n=_(l).$implicit,m=u();return f(m.registerObservationTrigger(n))}),d(11,"i",17),o(12," Observacion "),i(),t(13,"button",18),p("click",function(){let n=_(l).$implicit,m=u();return f(m.triggerFinishTicket(n))}),d(14,"i",19),o(15," Finalizar "),i()()()}if(r&2){let l=s.$implicit;c(2),S(l.tittle),c(2),S(C(5,3,l.assignmentDate)),c(3),S(C(8,5,l.endDate))}}function J(r,s){if(r&1){let l=k();t(0,"div",22)(1,"button",23),p("click",function(){_(l);let a=u(2);return a.generalDialog=!1,f(a.selectedTicket.set(null))}),d(2,"i",19),o(3," Cancelar "),i(),t(4,"button",16),p("click",function(){_(l);let a=u(2);return f(a.finishTicket())}),d(5,"i",11),o(6," Aceptar "),i()()}}function K(r,s){if(r&1){let l=k();t(0,"div")(1,"button",16),p("click",function(){_(l);let a=u(2);return f(a.resetGeneralDialog())}),d(2,"i",11),o(3," Aceptar "),i()()}}function Q(r,s){if(r&1&&(h(0,J,7,0,"div",20),h(1,K,4,0,"div",21)),r&2){let l=u();g("ngIf",l.generalDialogMessage().option==="finish"),c(1),g("ngIf",l.generalDialogMessage().option==="general")}}var X=function(){return{"min-width":"50rem"}},Z=function(){return[10,25,50]},U=function(){return{width:"90%",maxWidth:"650px"}},W=(()=>{let s=class s{constructor(e){this.ticketsService=e,this.ticketsList=x([]),this.selectedTicket=x(null),this.observationDialog=!1,this.generalDialog=!1,this.generalDialogMessage=x({title:"",message:"",option:"general"}),this.observation=""}ngOnInit(){this.ticketsService.getTicketsByEmployeeId(1).subscribe({next:e=>{this.ticketsList.set(e)}})}triggerFinishTicket(e){this.generalDialogMessage.set({title:"Finalizar ticket",message:"\xBFEst\xE1 seguro que desea finalizar el ticket?",option:"finish"}),this.generalDialog=!0,this.selectedTicket.set(e)}finishTicket(){this.generalDialog=!1;let e=this.selectedTicket();e&&this.ticketsService.finishTicket(e.id).subscribe({next:()=>{this.generalDialog=!0,this.generalDialogMessage.set({title:"Ticket finalizado",message:"Se ha finalizado el ticket exitosamente",option:"general"}),this.ticketsList.update(a=>a.filter(n=>n.id!==e.id))}})}resetGeneralDialog(){this.generalDialog=!1,this.generalDialogMessage.set({title:"",message:"",option:"general"}),this.selectedTicket.set(null),this.observation=""}registerObservationTrigger(e){this.selectedTicket.set(e),this.observationDialog=!0,this.generalDialogMessage.set({title:"Registrar observaci\xF3n",message:"\xBFEst\xE1 seguro que desea registrar una observaci\xF3n?",option:"general"})}sendObservation(){this.observationDialog=!1;let e=this.selectedTicket();e&&this.ticketsService.registerObservation(e.id,this.observation).subscribe({next:()=>{this.observationDialog=!1,this.generalDialog=!0,this.generalDialogMessage.set({title:"Observaci\xF3n registrada",message:"Se ha registrado la observaci\xF3n exitosamente",option:"general"})}})}};s.\u0275fac=function(a){return new(a||s)(w(G))},s.\u0275cmp=E({type:s,selectors:[["app-employee-service"]],standalone:!0,features:[M],decls:17,vars:26,consts:[[1,"bg-white","shadow","flex","justify-between","items-center","p-4","rounded-md","mb-6"],[1,"text-2xl"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","paginator","rows","showCurrentPageReport","tableStyle","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[3,"header","visible","modal","draggable","resizable","visibleChange"],[1,"m-0"],["pTemplate","footer"],["id","observation","placeholder","Observacion",1,"w-full","h-32","p-2","resize-none","border","border-gray-300","rounded-md",3,"ngModel","ngModelChange"],[1,"mt-4"],["pTooltip","Registrar observacion","tooltipPosition","top",1,"bg-green-500","flex","items-center","ml-auto","gap-2","text-white","font-bold","py-2","px-4","rounded","transition-colors","hover:bg-green-700",3,"click"],[1,"pi","pi-check"],[1,"bg-cyan-600","text-white"],[1,"bg-cyan-600","text-white","text-center"],[1,"text-center"],[1,"flex","items-center","justify-center","gap-3"],["pTooltip","Registrar observacion","tooltipPosition","top",1,"bg-green-500","flex","items-center","gap-2","text-white","font-bold","py-2","px-4","rounded","transition-colors","hover:bg-green-700",3,"click"],[1,"pi","pi-eye"],["pTooltip","Finalizar ticket","tooltipPosition","top",1,"bg-green-500","flex","items-center","gap-2","text-white","font-bold","py-2","px-4","rounded","transition-colors","hover:bg-green-700",3,"click"],[1,"pi","pi-ban"],["class","flex items-center justify-between",4,"ngIf"],[4,"ngIf"],[1,"flex","items-center","justify-between"],["pTooltip","Registrar observacion","tooltipPosition","top",1,"bg-red-500","flex","items-center","gap-2","text-white","font-bold","py-2","px-4","rounded","transition-colors","hover:bg-red-700",3,"click"]],template:function(a,n){a&1&&(t(0,"header",0)(1,"h2",1),o(2,"Tickets de Servicio"),i()(),t(3,"section")(4,"p-table",2),h(5,Y,9,0,"ng-template",3),h(6,H,16,7,"ng-template",4),i(),t(7,"p-dialog",5),p("visibleChange",function(b){return n.generalDialog=b}),t(8,"p",6),o(9),i(),h(10,Q,2,2,"ng-template",7),i(),t(11,"p-dialog",5),p("visibleChange",function(b){return n.observationDialog=b}),t(12,"textarea",8),p("ngModelChange",function(b){return n.observation=b}),i(),t(13,"div",9)(14,"button",10),p("click",function(){return n.sendObservation()}),d(15,"i",11),o(16," Aceptar "),i()()()()),a&2&&(c(4),g("value",n.ticketsList())("paginator",!0)("rows",5)("showCurrentPageReport",!0)("tableStyle",v(22,X))("rowsPerPageOptions",v(23,Z)),c(3),T(v(24,U)),g("header",n.generalDialogMessage().title)("visible",n.generalDialog)("modal",!0)("draggable",!1)("resizable",!1),c(2),D(" ",n.generalDialogMessage().message," "),c(2),T(v(25,U)),g("header",n.generalDialogMessage().title)("visible",n.observationDialog)("modal",!0)("draggable",!1)("resizable",!1),c(1),g("ngModel",n.observation))},dependencies:[F,P,V,N,B,I,L,A,q,$,j,O,z,R],encapsulation:2});let r=s;return r})();var be=[{path:"",component:W},{path:"**",redirectTo:"/backlog/service-employee",pathMatch:"full"}];export{be as EMPLOYEE_SERVICE_ROUTES};
